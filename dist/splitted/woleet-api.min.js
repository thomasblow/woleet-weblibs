"use strict";!function(t,n){t.woleet=n(t.woleet)}(window,function(t){function n(t){this.name="getJSON",this.message=t.statusText&&t.statusText.length?t.statusText:"Error wile getting data",this.code=t.status,this.body=t.response,this.stack=(new Error).stack}function e(t){var e=new XMLHttpRequest;return new Promise(function(r,o){e.onload=function(){switch(e.status){case 200:case 201:r("string"==typeof e.response?JSON.parse(e.response):e.response);break;case 404:r(null);break;default:o(new n(e))}},e.onerror=function(){o(new n(e))},e.open("GET",t,!0),e.responseType="json",e.json="json",e.send()})}function r(t,n,e,r,o){return"Invalid Date"==e.toString()&&(e=null),{tx_id:t,confirmations:n,confirmedAt:e,blockHash:r,opReturn:o}}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n;var o="https://api.woleet.io/v1",a=t||{};return a.receipt=a.receipt||{},a.anchor=a.anchor||{},a.transaction=function(){var t="blockcypher.com";return{setDefaultProvider:function(n){switch(n){case"blockcypher.com":t=n;break;case"woleet.io":t=n;break;case"chain.so":default:t="chain.so"}},get:function(n){switch(t){case"woleet.io":return e(o+"/bitcoin/transaction/"+n).then(function(t){if(t&&200==t.status)return r(t.data.txid,t.data.confirmations,new Date(1e3*t.data.time),t.data.blockhash||0,function(t){var n=null;return t.forEach(function(t){if(t.hasOwnProperty("scriptPubKey")&&t.scriptPubKey.hasOwnProperty("asm")&&t.scriptPubKey.asm.indexOf("OP_RETURN")!=-1&&(n=t.scriptPubKey.asm.split(" ")[1]),n)return!0}),n}(t.data.vout||[]));throw new Error("tx_not_found")});case"chain.so":return e("https://chain.so/api/v2/get_tx/BTC/"+n).then(function(t){if(t&&"fail"!=t.status)return r(t.data.txid,t.data.confirmations,new Date(1e3*t.data.time),t.data.blockhash,function(t){var n=null;return t.forEach(function(t){if(t.hasOwnProperty("script")&&(t.script.indexOf("OP_RETURN")!=-1&&(n=t.script.split(" ")[1]),n))return!0}),n}(t.data.outputs||[]));throw new Error("tx_not_found")});case"blockcypher.com":return e("https://api.blockcypher.com/v1/btc/main/txs/"+n).then(function(t){if(!t||t.error)throw new Error("tx_not_found");return r(t.hash,t.confirmations,new Date(t.confirmed),t.block_hash,function(t){var n=null;return t.forEach(function(t){if(t.hasOwnProperty("data_hex")&&(n=t.data_hex),n)return!0}),n}(t.outputs||[]))})}}}}(),a.anchor.getAnchorIDs=function(t,n){return n=n||20,e(o+"/anchorids?size="+n+"&hash="+t)},a.receipt.get=function(t){return e(o+"/receipt/"+t).then(function(t){if(t)return t;throw new Error("not_found")})},a.isSHA256=function(t){var n=/^[A-Fa-f0-9]{64}$/;return n.test(t)},a});