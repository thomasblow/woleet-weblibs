"use strict";!function(r,t){r.woleet=t(r.woleet)}(window,function(r){function t(r,t,e){var a=e||n,o=r,i=t,h=a(o+i);this.get_parent=function(){return h},this.contains=function(r){return o==r||i==r},this.get_json=function(){return{parent:h,left:o,right:i}}}function e(r,t){var e=this;this.hash_f=t||n,this.branches=[],this.target=r,this.add=function(r){e.branches.push(r)},this.is_valid=function(){var r=e.target;if(!e.branches.length)return!1;for(var t,n=0;n<e.branches.length;n++){if(t=e.branches[n],!t.contains(r))return!1;r=t.get_parent()}return r},this.get_json=function(){var r=[];return e.branches.forEach(function(t){r.push(t.get_json())}),r}}var n=function(){function r(r,t){return t>>>r|t<<32-r}function t(t){return r(2,t)^r(13,t)^r(22,t)}function e(t){return r(6,t)^r(11,t)^r(25,t)}function n(t){return r(7,t)^r(18,t)^t>>>3}function a(t){return r(17,t)^r(19,t)^t>>>10}function o(r,t,e){return r&t^~r&e}function i(r,t,e){return r&t^r&e^t&e}return function(r){var h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];r+=String.fromCharCode(128);for(var c=r.length/4+2,u=Math.ceil(c/16),g=new Array(u),s=0;s<u;s++){g[s]=new Array(16);for(var _=0;_<16;_++)g[s][_]=r.charCodeAt(64*s+4*_)<<24|r.charCodeAt(64*s+4*_+1)<<16|r.charCodeAt(64*s+4*_+2)<<8|r.charCodeAt(64*s+4*_+3)}var l=8*(r.length-1)/Math.pow(2,32),v=8*(r.length-1)>>>0;g[u-1][14]=Math.floor(l),g[u-1][15]=v;for(var p=0;p<u;p++){for(var d=new Array(64),w=0;w<16;w++)d[w]=g[p][w];for(var m=16;m<64;m++)d[m]=a(d[m-2])+d[m-7]+n(d[m-15])+d[m-16]>>>0;for(var A=f[0],E=f[1],b=f[2],C=f[3],k=f[4],y=f[5],S=f[6],j=f[7],H=0;H<64;H++){var M=j+e(k)+o(k,y,S)+h[H]+d[H],x=t(A)+i(A,E,b);j=S,S=y,y=k,k=C+M>>>0,C=b,b=E,E=A,A=M+x>>>0}f[0]=f[0]+A>>>0,f[1]=f[1]+E>>>0,f[2]=f[2]+b>>>0,f[3]=f[3]+C>>>0,f[4]=f[4]+k>>>0,f[5]=f[5]+y>>>0,f[6]=f[6]+S>>>0,f[7]=f[7]+j>>>0}for(var q=0;q<f.length;q++)f[q]=("00000000"+f[q].toString(16)).slice(-8);return f.join("")}}(),a=r||{};return a.receipt=a.receipt||{},a.receipt.validate=function(r){if(!(r&&r.target&&r.target.target_hash&&r.target.target_proof&&r.target.target_proof instanceof Array&&r.header&&r.header.hash_type&&r.header.merkle_root&&r.header.tx_id))throw new Error("invalid_receipt_format");for(var n=0;n<r.target.target_proof.length;n++){var o=r.target.target_proof[n];if(!o.left||!o.right||!o.parent)throw new Error("invalid_target_proof");if(!a.isSHA256(o.left)||!a.isSHA256(o.right)||!a.isSHA256(o.parent))throw new Error("non_sha256_target_proof_element")}if(0==r.target.target_proof.length){if(r.target.target_hash==r.header.merkle_root)return!0;throw new Error("merkle_root_mismatch")}var i=new e(r.target.target_hash);if(r.target.target_proof.forEach(function(r){var e=new t(r.left,r.right);if(!e.get_parent()==r.parent)throw new Error("invalid_parent_in_proof_element");i.add(e)}),i.is_valid()==r.header.merkle_root)return!0;throw new Error("merkle_root_mismatch")},a});