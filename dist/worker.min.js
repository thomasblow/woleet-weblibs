importScripts("crypto.min.js"),self.addEventListener("message",function(e){var r=e.data;postMessage({start:!0,file:r});var t,a=1e7,s=function(e,r){for(var t,a,s,i,n,l=r||16777215,o=CryptoJS.algo.SHA256.create(),f=e.size,y=0,c=l;;){a=new FileReaderSync,s=e.slice(y,c),postMessage({progress:y/e.size,file:e}),i=a.readAsArrayBuffer(s),n=new Uint8Array(i);var p=CryptoJS.lib.WordArray.create(n);if(t=o.update(p),i=null,n=null,p=null,a=null,y=c,c+=l,y>=f)return t.finalize(),t._hash.toString(CryptoJS.enc.Hex)}},i=function(e){var r=0,t=e.size,a=new FileReaderSync,s=e.slice(r,t),i=a.readAsArrayBuffer(s),n=new Uint8Array(i),l=CryptoJS.lib.WordArray.create(n);return CryptoJS.SHA256(l).toString()};try{t=r.size>a?s(r):i(r),postMessage({result:t,file:r})}catch(e){postMessage({error:e,file:r})}finally{}},!1);