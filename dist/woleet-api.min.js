"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){t.woleet=e(t.woleet)}(window,function(t){function e(t){this.name="getJSON",this.message=t.statusText&&t.statusText.length?t.statusText:"Error while getting data",this.code=t.status,this.body=t.response,this.stack=(new Error).stack}function n(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=new XMLHttpRequest;return new Promise(function(r,s){o.onload=function(){switch(o.status){case 200:case 201:r("string"==typeof o.response?JSON.parse(o.response):o.response);break;case 404:r(null);break;default:s(new e(o))}},o.onerror=function(){s(new e(o))},o.open(n.method||"GET",t,!0),n.token&&o.setRequestHeader("Authorization","Bearer "+n.token),"POST"==n.method&&o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Accept","application/json"),o.responseType="json",o.json="json",o.send("object"==_typeof(n.data)?JSON.stringify(n.data):n.data)})}function o(t,e,n,o,r){return"Invalid Date"==n.toString()&&(n=null),{txId:t,confirmations:e,confirmedOn:n,blockHash:o,opReturn:r}}e.prototype=Object.create(Error.prototype),e.prototype.constructor=e;var r="https://api.woleet.io/v1",s=t||{};return s.receipt=s.receipt||{},s.anchor=s.anchor||{},s.transaction=function(){var t="woleet.io";return{setDefaultProvider:function(e){switch(e){case"blockcypher.com":t=e;break;case"woleet.io":t=e;break;case"chain.so":default:t="chain.so"}},get:function(e){switch(t){case"woleet.io":return n(r+"/bitcoin/transaction/"+e).then(function(t){if(t)return o(t.txid,t.confirmations,new Date(1e3*t.time),t.blockhash||0,function(t){return t?t.scriptPubKey.asm.split(" ")[1]:null}((t.vout||[]).find(function(t){return t.hasOwnProperty("scriptPubKey")&&t.scriptPubKey.hasOwnProperty("asm")&&t.scriptPubKey.asm.startsWith("OP_RETURN")})));throw new Error("tx_not_found")});case"chain.so":return n("https://chain.so/api/v2/get_tx/BTC/"+e).then(function(t){if(t&&"fail"!=t.status)return o(t.data.txid,t.data.confirmations,new Date(1e3*t.data.time),t.data.blockhash,function(t){return t?t.script.split(" ")[1]:null}((t.data.outputs||[]).find(function(t){return t.hasOwnProperty("script")&&t.script.startsWith("OP_RETURN")})));throw new Error("tx_not_found")});case"blockcypher.com":return n("https://api.blockcypher.com/v1/btc/main/txs/"+e).then(function(t){if(!t||t.error)throw new Error("tx_not_found");return o(t.hash,t.confirmations,new Date(t.confirmed),t.block_hash,function(t){return t?t.data_hex:null}((t.outputs||[]).find(function(t){return t.hasOwnProperty("data_hex")})))})}}}}(),s.anchor.getAnchorIDs=function(t,e){return e=e||20,n(r+"/anchorids?size="+e+"&hash="+t)},s.receipt.get=function(t){return n(r+"/receipt/"+t).then(function(t){if(t)return t;throw new Error("not_found")})},s.isSHA256=function(t){var e=/^[A-Fa-f0-9]{64}$/;return e.test(t)},s._getJSON=n,s._woleetAPI=r,s});
//# sourceMappingURL=woleet-api.min.js.map
