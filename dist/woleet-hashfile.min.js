"use strict";!function(e,r){e.woleet=r(e.woleet)}(window,function(e){function r(){for(var e,r,t=document.getElementsByTagName("script"),n=t.length,a=/woleet-verify[.min]*\.js$/;e=t[--n].src;)if(e&&e.match(a)){r=e;break}return r?r.split("/").slice(0,-1).join("/")+"/":null}function t(){function e(e){var r=window.URL||window.webkitURL,t=window.Blob,n=window.Worker;if(!(r&&t&&n&&e))return null;var a=new t([e]);return new n(r.createObjectURL(a))}return new Promise(function(r){var t="onmessage = function(e) { postMessage(!!FileReaderSync); };";try{var n=e(t);n?(n.onmessage=function(e){r(e.data)},n.postMessage({})):r(!1)}catch(e){r(!1)}})}var n=(e.path||r()||"../dist/")+"worker.min.js",a=t(),o=e||{};return o.file=o.file||{},o.file.Hasher=function(){var e,r,t,o,i=!0;this.on=function(n,a){switch(n){case"start":e=a;break;case"progress":r=a;break;case"error":o=a;break;case"result":t=a;break;default:throw new Error('Invalid event name "'+n+'"')}};var s=function(a,s){function f(){l>=s?(c.terminate(),i=!0):(c.postMessage(a.item(l)),l++)}var l=0,c=new Worker(n);c.onmessage=function(n){if(void 0!=n.data.progress)r&&r(n.data);else if(n.data.result)t&&t(n.data),f();else if(n.data.start)e&&e(n.data);else if(n.data.error){var a=n.data.error;if(!o)throw a;o(a)}else console.trace("Unexpected worker message :",n)},s!=-1?f():c.postMessage(a)},f=function(n,a){function s(n){var a=new Error("file_too_big_to_be_hashed_without_worker");if(n.size>5e7){if(i=!0,o)return o({error:a,file:n});throw a}e&&e({start:!0,file:n});var s,l=new FileReader,c=CryptoJS.algo.SHA256.create(),u=0;l.onloadend=function(){s.finalize(),t&&t({result:s._hash.toString(CryptoJS.enc.Hex),file:n}),f()},l.onprogress=function(e){var t=e.target.result,a=t.slice(u,e.loaded),o=new Uint8Array(a),i=CryptoJS.lib.WordArray.create(o);s=c.update(i),u=e.loaded,r&&r({progress:e.loaded/e.total,file:n})},l.readAsArrayBuffer(n)}function f(){l>=a?i=!0:(s(n.item(l)),l++)}var l=0;a!=-1?f():s(n)};this.start=function(e){if(!i)throw new Error("not_ready");var r=-1;if(e instanceof FileList)r=e.length;else if(!(e instanceof File))throw new Error("invalid_parameter");i=!1,a.then(function(t){if(t)s(e,r);else{if("undefined"==typeof CryptoJS)throw new Error("no_viable_hash_method");f(e,r)}})},this.isReady=function(){return i}},o});
//# sourceMappingURL=woleet-hashfile.min.js.map
